<p-confirmDialog #cd>
    <p-footer>
        <button type="button" class="btn btn-accent m-btn m-btn--icon" (click)="cd.accept()">
            <span>
                <i class="la la-check"></i>
                <span>
                    Yes
                </span>
            </span>
        </button>
        <button type="button" class="btn btn-secondary m-btn m-btn--icon" (click)="cd.reject()">
            <span>
                <i class="la la-close"></i>
                <span>
                    No
                </span>
            </span>
        </button>
    </p-footer>
</p-confirmDialog>

<div class="m-subheader">
    <div class="d-flex align-items-center">
        <div class="mr-auto">
            <ul class="m-subheader__breadcrumbs m-nav m-nav--inline">
                <li class="m-nav__item m-nav__item--home">
                    <a href="#" class="m-nav__link m-nav__link--icon">
                        <i class="m-nav__link-icon la la-home"></i>
                    </a>
                </li>
                <li class="m-nav__separator">
                    -
                </li>
                <li class="m-nav__item">
                    <a class="m-nav__link">
                        <span class="m-nav__link-text">
                            Curtain Selection
                        </span>
                    </a>
                </li>
            </ul>
        </div>
        <div class="m-form__actions m-form__actions--solid formTopActionBtnBox">
            <button type="submit" *ngIf="params" class="topBtn btn btn-success" [isAuthorize]="['curtainselection']" title="{{ (params && (trnCurtainQuotationObj.isQuotationCreated == false)) ? 'Update And Create Quotation' : 'View Quotation' }}"
                (click)="onUpdateAndCreateQuotation()" tabindex="9">
                {{ (params && (trnCurtainQuotationObj.isQuotationCreated == false)) ? 'Update And Create Quotation' : 'View Quotation' }}
            </button>
            <button type="submit" class="btn btn-accent m-btn m-btn--air m-btn--custom formTopActionBtn" form="trnCurtainSelectionForm"
                title="{{(trnCurtainSelectionForm && trnCurtainSelectionForm.form.valid) ? 'Please fill in all the required fields' :  params ? 'Update' : 'Save'}}"
                [isAuthorize]="['curtainselection']" tabindex="16">
                {{ params ? 'Update' : 'Save' }}
            </button>
            <button class="btn btn-secondary" [isAuthorize]="['curtainselection']" (click)="onCancel()" tabindex="17">
                Cancel
            </button>
        </div>
    </div>
</div>
<!-- END: Subheader -->
<div class="m-content">
    <div class="row">
        <div class="col-lg-12">
            <!--begin::Portlet-->
            <div class="m-portlet">

                <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

                <div class="row">

                    <div class="col-md-12">

                        <div class="formContainerSamePage">
                            <form class="m-form m-form--fit m-form--label-align-right m-form--group-seperator-dashed inputForm" role="form" novalidate
                                (ngSubmit)="onSubmit(trnCurtainSelectionForm)" #trnCurtainSelectionForm="ngForm" id="trnCurtainSelectionForm">
                                <div class="row">

                                    <div class="col-md-12">

                                        <div class="row">
                                            <div class="col-md-12">
                                                <!-- Basic Details -->
                                                <div class="panel panel-default">
                                                    <div class="panel-heading">Basic Details</div>
                                                    <div class="panel-body">

                                                        <div class="row form-group">

                                                            <div class="col-md-6">
                                                                <div class="row">
                                                                    <div class="col-md-6">
                                                                        <label class="col-md-4 col-sm-4 fieldLabel noPadding">Date</label>
                                                                        <div class="col-md-8 col-sm-8">
                                                                            <p-calendar class="purchaseOrderDate" #curtainSelectionDateVal="ngModel" [(ngModel)]="trnCurtainQuotationObj.curtainQuotationDate"
                                                                                name="curtainSelectionDate" [monthNavigator]="true"
                                                                                [yearNavigator]="true" tabindex="1" [disabled]="disabled"
                                                                                yearRange="2015:2030" dateFormat="dd/mm/yy" styleClass="{{ curtainSelectionDateVal.errors && isFormSubmitted?'red-border-class':''}}"
                                                                                autofocus required></p-calendar>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <label class="col-md-5 col-sm-5 fieldLabel noPadding">Curtain Selection No.</label>
                                                                        <div class="col-md-7 col-sm-7">
                                                                            <input type="text" [(ngModel)]="trnCurtainQuotationObj.curtainSelectionNumber" name="curtainSelectionNumber" class="form-control"
                                                                                #orderNoVal="ngModel" disabled placeholder="">
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <label class="col-md-2 col-sm-2 fieldLabel">Customer
                                                                </label>
                                                                <div class="col-md-8 col-sm-8 customerNameBox">
                                                                    {{trnCurtainQuotationObj.mstCustomer? trnCurtainQuotationObj.mstCustomer.name:""}}
                                                                </div>
                                                            </div>


                                                        </div>
                                                        <div class="row form-group">
                                                            <!-- <div class="col-md-3">
																<label class="col-md-5 col-sm-5 fieldLabel noPadding">isQuotationCreated</label>
																<div class="col-md-7 col-sm-7">
																	<input type="checkbox" name="isQuotationCreated" [(ngModel)]="trnCurtainQuotationObj.isQuotationCreated" value="1" [disabled]="!status" class="" style="float: none;margin-left:0!important;" tabindex="11"> 
																</div>
															</div> -->
                                                            <div class="col-md-3">
                                                                <label class="col-md-4 col-sm-4 fieldLabel noPadding">Referred By
                                                                </label>
                                                                <div class="col-md-8 col-sm-8">
                                                                    <select class="form-control" name="agent" [(ngModel)]="trnCurtainQuotationObj.referById" [disabled]="!viewItem" tabindex="4">
                                                                        <option *ngFor="let x of agentList" [ngValue]="x.value" [selected]="trnCurtainQuotationObj.referById == x.value">{{x.label}}</option>
                                                                    </select>
                                                                    <!-- <p-dropdown class="feePlanBox" [options]="agentList" [disabled]="!viewItem" [style]="{'width':'100%'}" [(ngModel)]="trnCurtainQuotationObj.referById"
																	 name="agent" filter="true" tabindex="4"></p-dropdown> -->
                                                                </div>
                                                            </div>
                                                        </div>


                                                    </div>
                                                </div>


                                            </div>

                                        </div>

                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="panel panel-default">
                                                    <div class="panel-heading">Item Details</div>

                                                    <div class="panel-body" *ngFor="let areaRow of trnCurtainQuotationObj.areaList;let rowNum=index;let lastRowNum=last;">
                                                        <div class="row form-group">
                                                            <div class="col-md-4">
                                                                <label class="col-md-4 col-sm-4 fieldLabel ">Area
                                                                    <span class="requiredField">*</span>
                                                                </label>
                                                                <div class="col-md-8 col-sm-8">
                                                                    <input class="form-control m-input" type="text" [(ngModel)]="areaRow.area" name="{{'area'+areaRow.contRoleId}}" id="{{'area'+rowNum}}"
                                                                        placeholder="" tabindex="6" [ngClass]="{'red-border-class': areaVal.errors && isFormSubmitted}"
                                                                        #areaVal="ngModel" required>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-12">
                                                                <div class="panel panel-default">
                                                                    <div class="panel-heading">Unit Details</div>
                                                                    <div class="panel-body" *ngFor="let unitRow of areaRow?.unitList;let unitRowNum=index;let unitLastRowNum=last;">
                                                                        <div class="row form-group">
                                                                            <div class="col-md-3">

                                                                                <label class="col-md-4 col-sm-4 fieldLabel ">Unit
                                                                                    <span class="requiredField">*</span>
                                                                                </label>
                                                                                <div class="col-md-8 col-sm-8">
                                                                                    <input class="form-control m-input" type="text" [(ngModel)]="unitRow.unit" name="{{'unit'+unitRow.contRoleId}}" placeholder=""
                                                                                        tabindex="6" [ngClass]="{'red-border-class': unitVal.errors && isFormSubmitted}"
                                                                                        #unitVal="ngModel" required>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-3">
                                                                                <label class="col-md-4 col-sm-4 fieldLabel ">Pattern
                                                                                    <span class="requiredField">*</span>
                                                                                </label>
                                                                                <div class="col-md-8 col-sm-8">
                                                                                    <!-- <input class="form-control m-input" type="text" [ngClass]="{'red-border-class': areaError}" [(ngModel)]="unitRow.pattern"
                                                                                        name="{{'patern'+unitRow.contRoleId}}" placeholder=""
                                                                                        tabindex="6"> -->
                                                                                    <select class="form-control" name="{{'patern'+unitRow.contRoleId}}" [(ngModel)]="unitRow.patternId" tabindex="9" [ngClass]="{'red-border-class': paternVal.errors && isFormSubmitted}"
                                                                                        #paternVal="ngModel" required>
                                                                                        <option *ngFor="let x of patternList" [ngValue]="x.id" [selected]="unitRow.patternId == x.id">{{x.name}}</option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-4">
                                                                                <label class="col-md-3 col-sm-3 fieldLabel ">Height
                                                                                    <span class="requiredField">*</span>
                                                                                </label>
                                                                                <div class="col-md-3 col-sm-3">
                                                                                    <input class="form-control m-input" type="text" [(ngModel)]="unitRow.unitHeight" name="{{'unitheight'+unitRow.contRoleId}}"
                                                                                        placeholder="" tabindex="6" [ngClass]="{'red-border-class': hightVal.errors && isFormSubmitted}"
                                                                                        #hightVal="ngModel" (blur)="onUnitHeightChange(unitRow,unitRowNum,rowNum)"
                                                                                        required>
                                                                                </div>
                                                                                <label class="col-md-3 col-sm-3 fieldLabel ">Width
                                                                                    <span class="requiredField">*</span>
                                                                                </label>
                                                                                <div class="col-md-3 col-sm-3">
                                                                                    <input class="form-control m-input" type="text" [(ngModel)]="unitRow.unitWidth" name="{{'unitwidth'+unitRow.contRoleId}}"
                                                                                        placeholder="" tabindex="6" [ngClass]="{'red-border-class': widthVal.errors && isFormSubmitted}"
                                                                                        #widthVal="ngModel" required (blur)="onUnitWidthChange(unitRow,unitRowNum,rowNum)">
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <label class="col-md-7 col-sm-7 fieldLabel ">Panels
                                                                                    <span class="requiredField">*</span>
                                                                                </label>
                                                                                <div class="col-md-5 col-sm-5">
                                                                                    <input class="form-control m-input" type="text" [(ngModel)]="unitRow.numberOfPanel" name="{{'unitnumberOfPanel'+unitRow.contRoleId}}"
                                                                                        placeholder="" tabindex="6" [ngClass]="{'red-border-class': hightVal.errors && isFormSubmitted}"
                                                                                        #hightVal="ngModel" required>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row form-group" *ngFor="let fabricRow of unitRow?.fabricList;let fabricRowNum=index;let fabricLastRowNum=last;">
                                                                            <div class="col-md-3">
                                                                                <label class="col-md-4 col-sm-4 fieldLabel">Collection
                                                                                    <span class="requiredField">*</span>
                                                                                </label>
                                                                                <div class="col-md-8 col-sm-8">
                                                                                    <select class="form-control" name="{{'collection'+unitRow.contRoleId+fabricRowNum+0000}}" [(ngModel)]="fabricRow.collectionId"
                                                                                        (ngModelChange)="onChangeCollection(fabricRow)"
                                                                                        tabindex="9" [ngClass]="{'red-border-class': collectionVal.errors && isFormSubmitted}"
                                                                                        #collectionVal="ngModel" required>
                                                                                        <option *ngFor="let x of collectionList" [ngValue]="x.value" [selected]="fabricRow.collectionId == x.value">{{x.label}}</option>
                                                                                    </select>
                                                                                    <!-- <p-dropdown class="feePlanBox" [options]="collectionList" [(ngModel)]="collectionId" [style]="{'width':'100%'}" styleClass="{{collectionIdError?'red-border-class': ''}}"
                                                                                             name="collectionCodeDDl" filter="true" tabindex="9" (ngModelChange)="onChangeCollection()"></p-dropdown> -->
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-3">
                                                                                <label class="col-md-4 col-sm-4 fieldLabel">Shade
                                                                                    <span class="requiredField">*</span>
                                                                                </label>
                                                                                <div class="col-md-8 col-sm-8">
                                                                                    <select class="form-control" name="{{'shade'+unitRow.contRoleId+fabricRowNum+0000}}" [(ngModel)]="fabricRow.shadeId" tabindex="9"
                                                                                        (ngModelChange)="onChangeShade(fabricRow)"
                                                                                        [ngClass]="{'red-border-class': shadeVal.errors && isFormSubmitted}"
                                                                                        #shadeVal="ngModel" required>
                                                                                        <option *ngFor="let x of fabricRow.shadeList" [ngValue]="x.shadeId" [selected]="fabricRow.shadeId == x.shadeId">{{x.serialno}}</option>
                                                                                    </select>
                                                                                    <!-- <p-dropdown class="feePlanBox" [options]="collectionList" [(ngModel)]="collectionId" [style]="{'width':'100%'}" styleClass="{{collectionIdError?'red-border-class': ''}}"
                                                                                                 name="collectionCodeDDl" filter="true" tabindex="9" (ngModelChange)="onChangeCollection()"></p-dropdown> -->
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <label class="col-md-3 col-sm-3 fieldLabel ">Patch
                                                                                </label>
                                                                                <div class="col-md-2 col-sm-2">
                                                                                    {{fabricRow.isPatch?"Yes":"No"}}
                                                                                </div>
                                                                                <label class="col-md-4 col-sm-4 fieldLabel ">Lining
                                                                                </label>
                                                                                <div class="col-md-2 col-sm-2">
                                                                                    <!-- <input type="radio" name="{{'lining'+unitRow.contRoleId+fabricRowNum+0000}}" [checked]="fabricRow.isLining == true" [value]="fabricRow.isLining"
                                                                                        (click)="selectedLining(rowNum,unitRowNum,fabricRowNum)"> -->
                                                                                    {{fabricRow.isLining?"Yes":"No"}}
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-4" *ngIf="fabricRow.isLining || !fabricRow.isPatch">
                                                                                <label class="col-md-1 col-sm-1 fieldLabel ">Rate
                                                                                </label>
                                                                                <div class="col-md-3 col-sm-3">
                                                                                    <label>{{fabricRow.rate}}</label>
                                                                                </div>
                                                                                <label class="col-md-3 col-sm-3 fieldLabel ">Quantity
                                                                                    <span class="requiredField">*</span>
                                                                                </label>
                                                                                <div class="col-md-4 col-sm-4">
                                                                                    <input class="form-control m-input" type="text" [(ngModel)]="fabricRow.orderQuantity" name="{{'orderQuantity'+fabricRow.contRoleId}}"
                                                                                        placeholder="" tabindex="6" [ngClass]="{'red-border-class': orderQuantityVal.errors && isFormSubmitted}"
                                                                                        #orderQuantityVal="ngModel" required>

                                                                                    <!-- <label>{{fabricRow.discount}}%</label> -->
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-3" *ngIf="fabricRow.isLining || !fabricRow.isPatch">
                                                                                <label class="col-md-4 col-sm-4 fieldLabel ">Discount
                                                                                    <span class="requiredField">*</span>
                                                                                </label>
                                                                                <div class="col-md-6 col-sm-6">
                                                                                    <!-- <input class="form-control m-input" type="text" [(ngModel)]="fabricRow.discount" name="{{'discount'+fabricRowNum.contRoleId}}"
                                                                                            placeholder="" tabindex="6" [ngClass]="{'red-border-class': discountVal.errors && isFormSubmitted}"
                                                                                            #discountVal="ngModel" required> -->
                                                                                    <input class="form-control" OnlyNumber="true" DecimalPlaces="0" autocomplete="off" minValue="0" maxValue="{{fabricRow.maxDiscount}}"
                                                                                        [ngClass]="{'red-border-class': discountVal.errors}"
                                                                                        [(ngModel)]="fabricRow.discount" name="{{'discount'+fabricRowNum.contRoleId}}"
                                                                                        #discountVal="ngModel" tabindex="21"
                                                                                        placeholder="" (blur)="changeDiscount(fabricRow,fabricRowNum,unitRowNum,rowNum)">
                                                                                    <!-- <label>{{fabricRow.discount}}%</label> -->
                                                                                </div>
                                                                                <div class="col-md-2 col-sm-2">
                                                                                    %
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-4" *ngIf="fabricRow.isLining || !fabricRow.isPatch">
                                                                                <label class="col-md-4 col-sm-4 fieldLabel ">Amount
                                                                                    <span class="requiredField">*</span>
                                                                                </label>
                                                                                <div class="col-md-8 col-sm-8">

                                                                                    <label>{{fabricRow.amountWithGST}}</label>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <button type="button" pButton (click)="addFabricRow(unitRow)" icon="fa fa-plus" class="editBtn" title="Add Unit"></button>
                                                                                <button type="button" pButton (click)="onDeleteFabricRow(rowNum,unitRowNum,fabricRowNum, unitRow.fabricList)" icon="fa fa-times"
                                                                                    class="editBtn" title="Remove Unit"></button>
                                                                            </div>
                                                                            <div class="col-md-12" *ngIf="fabricRow.isPatch">
                                                                                <div class="col-md-2">
                                                                                    <div class="col-md-10 col-sm-10">
                                                                                        <label> Vertical</label>
                                                                                    </div>
                                                                                    <input type="checkbox" [(ngModel)]="fabricRow.isVerticalPatch" name="{{'isVerticalPatch'+unitRow.contRoleId+fabricRowNum+0000}}">
                                                                                </div>
                                                                                <div class="col-md-3">
                                                                                    <label class="col-md-8 col-sm-8 fieldLabel ">No Of Patch
                                                                                        <span class="requiredField">*</span>
                                                                                    </label>
                                                                                    <div class="col-md-4 col-sm-4">
                                                                                        <input class="form-control m-input" type="text" [(ngModel)]="fabricRow.noOfVerticalPatch" name="{{'noOfVerticalpatch'+unitRow.contRoleId+fabricRowNum+0000}}"
                                                                                            placeholder="" tabindex="6" [ngClass]="{'red-border-class': noOfverticalVal.errors && isFormSubmitted}"
                                                                                            #noOfverticalVal="ngModel" required
                                                                                            (blur)="calculateVerticalQuantity(fabricRow, fabricRowNum, unitRowNum, rowNum, unitRow)">
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-2">
                                                                                    <label class="col-md-6 col-sm-6 fieldLabel ">Width
                                                                                        <span class="requiredField">*</span>
                                                                                    </label>
                                                                                    <div class="col-md-6 col-sm-6">
                                                                                        <input class="form-control m-input" type="text" [(ngModel)]="fabricRow.verticalPatchWidth" name="{{'verticalPatchWidth'+unitRow.contRoleId+fabricRowNum+0000}}"
                                                                                            placeholder="" tabindex="6" [ngClass]="{'red-border-class': verticalPatchWidthVal.errors && isFormSubmitted}"
                                                                                            (blur)="calculateVerticalQuantity(fabricRow, fabricRowNum, unitRowNum, rowNum, unitRow)"
                                                                                            #verticalPatchWidthVal="ngModel"
                                                                                            required>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-4">
                                                                                    <label class="col-md-2 col-sm-2 fieldLabel ">Quantity
                                                                                    </label>
                                                                                    <div class="col-md-4 col-sm-4">
                                                                                        <label>{{fabricRow.verticalPatchQuantity}}</label>
                                                                                    </div>
                                                                                    <label class="col-md-4 col-sm-4 fieldLabel ">Rate
                                                                                    </label>
                                                                                    <div class="col-md-2 col-sm-2">
                                                                                        <label>{{fabricRow.verticalPatchRate}}</label>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-2">
                                                                                    <label class="col-md-6 col-sm-6 fieldLabel ">Discount
                                                                                        <span class="requiredField">*</span>
                                                                                    </label>
                                                                                    <div class="col-md-6 col-sm-6">
                                                                                        <!-- <input class="form-control m-input" type="text" [(ngModel)]="fabricRow.verticalPatchMaxDiscount" name="{{'verticalPatchMaxDiscount'+unitRow.contRoleId+fabricRowNum+0000}}"
                                                                                            placeholder="" tabindex="6" [ngClass]="{'red-border-class': verticalPatchMaxDiscountVal.errors && isFormSubmitted}"
                                                                                            #verticalPatchMaxDiscountVal="ngModel"
                                                                                            required> -->
                                                                                        <input class="form-control" OnlyNumber="true" DecimalPlaces="0" autocomplete="off" minValue="0" maxValue="{{fabricRow.verticalPatchMaxDiscount}}"
                                                                                            [ngClass]="{'red-border-class': verticalPatchMaxDiscountVal.errors}"
                                                                                            [(ngModel)]="fabricRow.verticalPatchDiscount"
                                                                                            name="{{'discount'+fabricRowNum.contRoleId}}"
                                                                                            #verticalPatchMaxDiscountVal="ngModel"
                                                                                            tabindex="21" placeholder="" (blur)="changeVerticalDiscount(fabricRow,fabricRowNum,unitRowNum,rowNum)"> %
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-2">
                                                                                    <label class="col-md-6 col-sm-6 fieldLabel ">Amount
                                                                                        <span class="requiredField">*</span>
                                                                                    </label>
                                                                                    <div class="col-md-6 col-sm-6">
                                                                                        {{fabricRow.verticalPatchAmountWithGST}}
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-12" *ngIf="fabricRow.isPatch">
                                                                                <div class="col-md-2">
                                                                                    <div class="col-md-10 col-sm-10">
                                                                                        <label> Horizontal</label>
                                                                                    </div>
                                                                                    <input type="checkbox" [(ngModel)]="fabricRow.isHorizontalPatch" name="{{'isHorizontalPatch'+unitRow.contRoleId+fabricRowNum+0000}}">
                                                                                </div>
                                                                                <div class="col-md-3">
                                                                                    <label class="col-md-6 col-sm-6 fieldLabel ">No Of Patch
                                                                                        <span class="requiredField">*</span>
                                                                                    </label>
                                                                                    <div class="col-md-6 col-sm-6">
                                                                                        <input class="form-control m-input" type="text" [(ngModel)]="fabricRow.noOfHorizontalPatch" name="{{'noOfHorizontalpatch'+unitRow.contRoleId+fabricRowNum+0000}}"
                                                                                            placeholder="" tabindex="6" [ngClass]="{'red-border-class': noOfHorizontalVal.errors && isFormSubmitted}"
                                                                                            #noOfHorizontalVal="ngModel" required (blur)="calculateHorizontalQuantity(fabricRow, fabricRowNum, unitRowNum, rowNum, unitRow)">
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-2">
                                                                                    <label class="col-md-6 col-sm-6 fieldLabel ">Height
                                                                                        <span class="requiredField">*</span>
                                                                                    </label>
                                                                                    <div class="col-md-6 col-sm-6">
                                                                                        <input class="form-control m-input" type="text" [(ngModel)]="fabricRow.horizontalPatchHeight" name="{{'horizontalPatchHeight'+unitRow.contRoleId+fabricRowNum+0000}}"
                                                                                            placeholder="" tabindex="6" [ngClass]="{'red-border-class': horizontalPatchHeightVal.errors && isFormSubmitted}"
                                                                                            #horizontalPatchHeightVal="ngModel" (blur)="calculateHorizontalQuantity(fabricRow, fabricRowNum, unitRowNum, rowNum, unitRow)"
                                                                                            required>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-4">
                                                                                    <label class="col-md-2 col-sm-2 fieldLabel ">Quantity
                                                                                    </label>
                                                                                    <div class="col-md-4 col-sm-4">
                                                                                        <label>{{fabricRow.horizontalPatchQuantity}}</label>
                                                                                    </div>
                                                                                    <label class="col-md-4 col-sm-4 fieldLabel ">Rate
                                                                                    </label>
                                                                                    <div class="col-md-2 col-sm-2">
                                                                                        <label>{{fabricRow.horizontalPatchRate}}</label>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-2">
                                                                                    <label class="col-md-6 col-sm-6 fieldLabel ">Discount
                                                                                        <span class="requiredField">*</span>
                                                                                    </label>
                                                                                    <div class="col-md-6 col-sm-6">
                                                                                        <!-- <input class="form-control m-input" type="text" [(ngModel)]="fabricRow.verticalPatchMaxDiscount" name="{{'verticalPatchMaxDiscount'+unitRow.contRoleId+fabricRowNum+0000}}"
                                                                                                placeholder="" tabindex="6" [ngClass]="{'red-border-class': verticalPatchMaxDiscountVal.errors && isFormSubmitted}"
                                                                                                #verticalPatchMaxDiscountVal="ngModel"
                                                                                                required> -->
                                                                                        <input class="form-control" OnlyNumber="true" DecimalPlaces="0" autocomplete="off" minValue="0" maxValue="{{fabricRow.horizontalPatchMaxDiscount}}"
                                                                                            [ngClass]="{'red-border-class': horizontalPatchMaxDiscountVal.errors}"
                                                                                            [(ngModel)]="fabricRow.horizontalPatchDiscount"
                                                                                            name="{{'discount'+fabricRowNum.contRoleId}}"
                                                                                            #horizontalPatchMaxDiscountVal="ngModel"
                                                                                            tabindex="21" placeholder="" (blur)="changeHorizontalDiscount(fabricRow,fabricRowNum,unitRowNum,rowNum)"> %
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-2">
                                                                                    <label class="col-md-6 col-sm-6 fieldLabel ">Amount
                                                                                        <span class="requiredField">*</span>
                                                                                    </label>
                                                                                    <div class="col-md-6 col-sm-6">
                                                                                        {{fabricRow.horizontalPatchRateWithGST}}
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row form-group" *ngFor="let accessoryRow of unitRow.accessoryList;let accessoryRowNum=index;let accessoryLastRowNum=last;">
                                                                            <div class="col-md-3">
                                                                                <label class="col-md-4 col-sm-4 fieldLabel ">Accessories
                                                                                </label>
                                                                                <div class="col-md-8 col-sm-8">
                                                                                    <select class="form-control" name="{{'accessory'+unitRow.contRoleId+accessoryRowNum+111}}" [(ngModel)]="accessoryRow.accessoryId"
                                                                                        tabindex="9" (ngModelChange)="onChangeAccesory(accessoryRow)"
                                                                                        [ngClass]="{'red-border-class': accessoryVal.errors && isFormSubmitted}"
                                                                                        #accessoryVal="ngModel">
                                                                                        <option *ngFor="let x of accessoryCodeList" [ngValue]="x.accessoryId" [selected]="accessoryId == x.accessoryId">{{x.itemCode}}</option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-4">
                                                                                <label class="col-md-3 col-sm-3 fieldLabel ">Rate
                                                                                </label>
                                                                                <div class="col-md-3 col-sm-3">
                                                                                    <label>{{accessoryRow.rate}}</label>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <button type="button" pButton (click)="addAccessoryRow(unitRow)" icon="fa fa-plus" class="editBtn" title="Delete Accessory"></button>
                                                                                <button type="button" pButton (click)="deleteAccessoryRow(rowNum,unitRowNum,accessoryRowNum,unitRow.accessoryList)" icon="fa fa-times"
                                                                                    class="editBtn" title="Delete Accessory"></button>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row form-group">
                                                                            <div class="col-md-2">
                                                                                <label class="col-md-8 col-sm-8 fieldLabel ">Is Track
                                                                                </label>
                                                                                <div class="col-md-4 col-sm-4">
                                                                                    <input type="checkbox" name="{{'istrack'+unitRow.contRoleId+77}}" [(ngModel)]="unitRow.isTrack">
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-3">
                                                                                <label class="col-md-4 col-sm-4 fieldLabel ">Tracks
                                                                                </label>
                                                                                <div class="col-md-8 col-sm-8">
                                                                                    <select class="form-control" name="{{'tracks'+unitRow.contRoleId}}" [(ngModel)]="unitRow.trackAccessoryId" tabindex="9" (ngModelChange)="onChangeTrackAccesory(unitRow)"
                                                                                        [ngClass]="{'red-border-class': accessoryTrackVal.errors && isFormSubmitted}"
                                                                                        #accessoryTrackVal="ngModel">
                                                                                        <option *ngFor="let x of trackCodeList" [ngValue]="x.accessoryId" [selected]="accessoryId == x.accessoryId">{{x.itemCode}}</option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <label class="col-md-3 col-sm-3 fieldLabel ">Rate
                                                                                </label>
                                                                                <div class="col-md-9 col-sm-9">
                                                                                    <label>{{unitRow.trackRate}}</label>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-4">
                                                                                <label class="col-md-2 col-sm-2 fieldLabel ">Quantity
                                                                                </label>
                                                                                <div class="col-md-4 col-sm-4">
                                                                                    <input class="form-control" OnlyNumber="true" DecimalPlaces="0" autocomplete="off" minValue="0" maxValue="10000" [ngClass]="{'red-border-class': trackQuantityVal.errors}"
                                                                                        [(ngModel)]="unitRow.trackQuantity" name="{{'trackQuantity'+unitRow.contRoleId}}"
                                                                                        #trackQuantityVal="ngModel" tabindex="21"
                                                                                        placeholder="" (blur)="changeTrackQuantity(unitRow,unitRowNum,rowNum)">
                                                                                </div>
                                                                                <label class="col-md-2 col-sm-2 fieldLabel ">Amount
                                                                                </label>
                                                                                <div class="col-md-4 col-sm-4">
                                                                                    {{unitRow.trackAmount}}
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-1">
                                                                                <button type="button" pButton (click)="addAccessoryRow(unitRow)" icon="fa fa-plus" class="editBtn" title="Delete Accessory"></button>
                                                                                <button type="button" pButton (click)="deleteAccessoryRow(rowNum,unitRowNum,accessoryRowNum,unitRow.accessoryList)" icon="fa fa-times"
                                                                                    class="editBtn" title="Delete Accessory"></button>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row form-group">
                                                                            <div class="col-md-4">
                                                                                <input type="button" class="btn btn-accent m-btn m-btn--air m-btn--custom formTopActionBtn" value="Add Unit" tabindex="14"
                                                                                    (click)="addUnit(areaRow)" />
                                                                                <input type="button" class="btn btn-secondary" value="Remove" (click)="removeUnit(rowNum,unitRowNum,areaRow.unitList)" tabindex="15">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="m-form__actions m-form__actions--solid formTopActionBtnBox formAddItemBox">
                                                            <input type="button" class="btn btn-accent m-btn m-btn--air m-btn--custom formTopActionBtn" value="Add Area" tabindex="14"
                                                                (click)="addArea()" />
                                                            <input type="button" class="btn btn-secondary" value="Remove" (click)="removeArea(rowNum)" tabindex="15">
                                                        </div>
                                                    </div>


                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>

                        </div>

                    </div>
                </div>


                <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
            </div>
            <!--end::Portlet-->
        </div>
    </div>
</div>